# jQAssistant Graph RAG Enricher

This project provides a tool to enrich a Neo4j graph generated by jQAssistant. It connects Java/Kotlin source code files to their corresponding compiled classes in the graph, enabling deeper analysis and AI agent interaction.

## Purpose

jQAssistant is excellent at extracting structural information from compiled Java artifacts (like `.class` and `.jar` files) and storing it in a Neo4j graph. However, the relationships between compiled classes (`:Type:Class` nodes) and their original Java/Kotlin source files (`:File` nodes) are often indirect or missing.

This tool fills that gap by:
1.  Scanning a Java/Kotlin project's source tree.
2.  Parsing `.java` and `.kt` files to extract package and top-level class/type information.
3.  Connecting the `:Type:Class` nodes (identified by their Fully Qualified Names - FQNs) to their respective `:File` nodes (identified by their relative paths) in the jQAssistant-generated graph.

This enrichment is crucial for AI agents or other analysis tools that need to access the actual source code of a class for tasks like:
*   Code understanding and summarization.
*   Refactoring suggestions.
*   Bug analysis and patch generation.
*   Architectural review based on source-level details.

## How it Works

The tool operates in two main steps:

1.  **Source Code Parsing**: It walks the specified Java/Kotlin project directory, identifies all `.java` and `.kt` files, and uses the `javalang` or `tree-sitter-kotlin` library to parse them. For each file, it extracts the package name and the names of all top-level classes/types, then constructs their Fully Qualified Names (FQNs).
2.  **Neo4j Graph Enrichment**: It connects to your jQAssistant-generated Neo4j database. Using the parsed metadata, it efficiently matches `:File` nodes (by `fileName` property) and `:Type:Class` nodes (by `fqn` property) and creates new `[:WITH_SOURCE]` relationships between them.

## Usage

To run this tool, you need:
*   A running Neo4j instance with a jQAssistant-generated graph.
*   The `javalang` Python library installed (`pip install javalang`).
*   For Kotlin support, `tree-sitter` and `tree-sitter-kotlin` are required.

```bash
python3 main.py <path_to_your_java_project_root> [OPTIONS]
```

### Arguments:

*   `<path_to_your_java_project_root>`: The absolute or relative path to the root directory of your Java/Kotlin source code project.

### Options:

*   `--uri <neo4j_uri>`: Neo4j connection URI (default: `bolt://localhost:7687`). Can also be set via `NEO4J_URI` environment variable.
*   `--user <neo4j_user>`: Neo4j username (default: `neo4j`). Can also be set via `NEO4J_USER` environment variable.
*   `--password <neo4j_password>`: Neo4j password (default: `12345678`). Can also be set via `NEO4J_PASSWORD` environment variable.
*   `--log-level <level>`: Set the logging level (choices: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`; default: `INFO`).

### Example:

```bash
python3 main.py /path/to/your/java/project --user neo4j --password your_password --log-level DEBUG
```
